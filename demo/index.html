<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMKit æ¼”ç¤º - å›½å¯†ç®—æ³•åœ¨çº¿æµ‹è¯•</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            color: rgba(255,255,255,0.9);
            text-align: center;
            margin-bottom: 40px;
            font-size: 1.1em;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 12px 24px;
            cursor: pointer;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }
        
        .tab:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .tab.active {
            background: white;
            color: #667eea;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        input[type="text"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .result h3 {
            margin-bottom: 10px;
            color: #667eea;
        }
        
        .result pre {
            background: white;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .info-box {
            background: #e8f4fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }
        
        .info-box h4 {
            color: #2196F3;
            margin-bottom: 8px;
        }
        
        .info-box p {
            color: #555;
            line-height: 1.6;
        }
        
        .code-snippet {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            overflow-x: auto;
        }
        
        .code-snippet code {
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” SMKit æ¼”ç¤º</h1>
        <p class="subtitle">ä¸­å›½å›½å¯†ç®—æ³•ï¼ˆSM2ã€SM3ã€SM4ï¼‰åœ¨çº¿æµ‹è¯•å·¥å…·</p>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('sm3')">SM3 å“ˆå¸Œ</button>
            <button class="tab" onclick="showTab('sm4')">SM4 åŠ è§£å¯†</button>
            <button class="tab" onclick="showTab('sm2')">SM2 ç­¾åéªŒç­¾</button>
            <button class="tab" onclick="showTab('about')">å…³äº</button>
        </div>
        
        <!-- SM3 Tab -->
        <div id="sm3" class="tab-content active">
            <div class="info-box">
                <h4>SM3 å¯†ç å“ˆå¸Œç®—æ³•</h4>
                <p>SM3 æ˜¯ä¸­å›½å›½å®¶å¯†ç ç®¡ç†å±€å‘å¸ƒçš„å¯†ç å“ˆå¸Œç®—æ³•ï¼Œè¾“å‡º 256 ä½ï¼ˆ32 å­—èŠ‚ï¼‰å“ˆå¸Œå€¼ã€‚</p>
            </div>
            
            <div class="form-group">
                <label for="sm3-input">è¾“å…¥æ–‡æœ¬ï¼š</label>
                <textarea id="sm3-input" placeholder="è¾“å…¥è¦è®¡ç®—å“ˆå¸Œçš„æ–‡æœ¬...">Hello, SM3!</textarea>
            </div>
            
            <button onclick="testSM3()">è®¡ç®— SM3 å“ˆå¸Œ</button>
            
            <div id="sm3-result"></div>
        </div>
        
        <!-- SM4 Tab -->
        <div id="sm4" class="tab-content">
            <div class="info-box">
                <h4>SM4 åˆ†ç»„å¯†ç ç®—æ³•</h4>
                <p>SM4 æ˜¯ä¸­å›½å›½å®¶å¯†ç ç®¡ç†å±€å‘å¸ƒçš„åˆ†ç»„å¯†ç ç®—æ³•ï¼Œå¯†é’¥é•¿åº¦ 128 ä½ã€‚æ”¯æŒ ECB å’Œ CBC æ¨¡å¼ã€‚</p>
            </div>
            
            <div class="form-group">
                <label for="sm4-key">å¯†é’¥ï¼ˆ32 ä½åå…­è¿›åˆ¶å­—ç¬¦ï¼‰ï¼š</label>
                <input type="text" id="sm4-key" value="0123456789abcdeffedcba9876543210" placeholder="è¯·è¾“å…¥ 16 å­—èŠ‚çš„å¯†é’¥ï¼ˆ32 ä½åå…­è¿›åˆ¶ï¼‰">
            </div>
            
            <div class="form-group">
                <label for="sm4-plaintext">æ˜æ–‡ï¼š</label>
                <textarea id="sm4-plaintext" placeholder="è¾“å…¥è¦åŠ å¯†çš„æ–‡æœ¬...">Hello, SM4!</textarea>
            </div>
            
            <div class="button-group">
                <button onclick="testSM4Encrypt()">åŠ å¯†</button>
                <button onclick="testSM4Decrypt()">è§£å¯†</button>
            </div>
            
            <div id="sm4-result"></div>
        </div>
        
        <!-- SM2 Tab -->
        <div id="sm2" class="tab-content">
            <div class="info-box">
                <h4>SM2 æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•</h4>
                <p>SM2 æ˜¯ä¸­å›½å›½å®¶å¯†ç ç®¡ç†å±€å‘å¸ƒçš„æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•ï¼ŒåŸºäº 256 ä½æ¤­åœ†æ›²çº¿ã€‚</p>
            </div>
            
            <div class="button-group">
                <button onclick="generateSM2KeyPair()">ç”Ÿæˆå¯†é’¥å¯¹</button>
            </div>
            
            <div class="form-group">
                <label for="sm2-private-key">ç§é’¥ï¼š</label>
                <input type="text" id="sm2-private-key" placeholder="ç‚¹å‡»"ç”Ÿæˆå¯†é’¥å¯¹"æŒ‰é’®ç”Ÿæˆ" readonly>
            </div>
            
            <div class="form-group">
                <label for="sm2-public-key">å…¬é’¥ï¼š</label>
                <input type="text" id="sm2-public-key" placeholder="ç‚¹å‡»"ç”Ÿæˆå¯†é’¥å¯¹"æŒ‰é’®ç”Ÿæˆ" readonly>
            </div>
            
            <div class="form-group">
                <label for="sm2-message">æ¶ˆæ¯ï¼š</label>
                <textarea id="sm2-message" placeholder="è¾“å…¥è¦ç­¾åçš„æ¶ˆæ¯...">Hello, SM2!</textarea>
            </div>
            
            <div class="button-group">
                <button onclick="testSM2Sign()">ç­¾å</button>
                <button onclick="testSM2Verify()">éªŒè¯ç­¾å</button>
            </div>
            
            <div id="sm2-result"></div>
        </div>
        
        <!-- About Tab -->
        <div id="about" class="tab-content">
            <h2>å…³äº SMKit</h2>
            <p style="line-height: 1.8; margin: 20px 0;">
                SMKit æ˜¯ä¸€ä¸ªçº¯ TypeScript å®ç°çš„ä¸­å›½å›½å¯†ç®—æ³•åº“ï¼ŒåŒ…å« SM2ã€SM3ã€SM4 ç®—æ³•çš„å®Œæ•´å®ç°ã€‚
            </p>
            
            <h3 style="margin-top: 30px; margin-bottom: 15px;">âœ¨ ç‰¹æ€§</h3>
            <ul style="line-height: 2; margin-left: 20px;">
                <li><strong>çº¯ç²¹æ€§</strong>ï¼šé›¶è¿è¡Œæ—¶ä¾èµ–ï¼Œçº¯ TypeScript å®ç°</li>
                <li><strong>ç°ä»£åŒ–</strong>ï¼šå®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ</li>
                <li><strong>åŒæ„æ€§</strong>ï¼šåŒæ—¶æ”¯æŒ Node.js å’Œæµè§ˆå™¨ç¯å¢ƒ</li>
                <li><strong>é«˜æ€§èƒ½</strong>ï¼šä¼˜åŒ–çš„å®ç°ï¼ŒåŸºäº @noble/curves å‡†å¤‡</li>
            </ul>
            
            <h3 style="margin-top: 30px; margin-bottom: 15px;">ğŸ“¦ å®‰è£…</h3>
            <div class="code-snippet">
                <code>npm install smkit</code>
            </div>
            
            <h3 style="margin-top: 30px; margin-bottom: 15px;">ğŸ’» ä½¿ç”¨ç¤ºä¾‹</h3>
            <div class="code-snippet">
                <code>import { digest, sm4Encrypt, generateKeyPair } from 'smkit';

// SM3 å“ˆå¸Œ
const hash = digest('Hello, World!');

// SM4 åŠ å¯†
const encrypted = sm4Encrypt(key, plaintext);

// SM2 å¯†é’¥ç”Ÿæˆ
const keyPair = generateKeyPair();</code>
            </div>
            
            <h3 style="margin-top: 30px; margin-bottom: 15px;">ğŸ”— é“¾æ¥</h3>
            <ul style="line-height: 2; margin-left: 20px;">
                <li><a href="https://github.com/linyuliu/smkit" target="_blank" style="color: #667eea;">GitHub ä»“åº“</a></li>
                <li><a href="https://www.npmjs.com/package/smkit" target="_blank" style="color: #667eea;">NPM åŒ…</a></li>
            </ul>
        </div>
    </div>
    
    <script type="module">
        // å¯¼å…¥ SMKitï¼ˆåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œéœ€è¦å…ˆæ„å»ºåº“ï¼‰
        // è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ CDN æˆ–æœ¬åœ°æ„å»ºçš„ç‰ˆæœ¬
        
        // ä¸´æ—¶å®ç°ç”¨äºæ¼”ç¤º
        window.smkit = {
            digest: (text) => {
                // ç®€åŒ–çš„ SM3 å®ç°å ä½
                return '9a4c6d8f7e3b2a1c5d4e3f2a1b0c9d8e7f6a5b4c3d2e1f0a9b8c7d6e5f4a3b2c1';
            },
            sm4Encrypt: (key, plaintext) => {
                // ç®€åŒ–çš„ SM4 å®ç°å ä½
                return 'encrypted_' + plaintext;
            },
            sm4Decrypt: (key, ciphertext) => {
                // ç®€åŒ–çš„ SM4 å®ç°å ä½
                return ciphertext.replace('encrypted_', '');
            },
            generateKeyPair: () => {
                // ç®€åŒ–çš„å¯†é’¥ç”Ÿæˆå ä½
                const privateKey = Array.from({length: 64}, () => 
                    Math.floor(Math.random() * 16).toString(16)
                ).join('');
                const publicKey = '04' + privateKey + privateKey;
                return { privateKey, publicKey };
            },
            sign: (privateKey, message) => {
                // ç®€åŒ–çš„ç­¾åå ä½
                return Array.from({length: 128}, () => 
                    Math.floor(Math.random() * 16).toString(16)
                ).join('');
            },
            verify: (publicKey, message, signature) => {
                // ç®€åŒ–çš„éªŒç­¾å ä½
                return signature.length === 128;
            }
        };
    </script>
    
    <script>
        function showTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µ
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µ
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        function testSM3() {
            const input = document.getElementById('sm3-input').value;
            const hash = window.smkit.digest(input);
            
            document.getElementById('sm3-result').innerHTML = `
                <div class="result">
                    <h3>å“ˆå¸Œç»“æœï¼š</h3>
                    <pre>${hash}</pre>
                </div>
            `;
        }
        
        function testSM4Encrypt() {
            const key = document.getElementById('sm4-key').value;
            const plaintext = document.getElementById('sm4-plaintext').value;
            
            if (key.length !== 32) {
                alert('å¯†é’¥å¿…é¡»æ˜¯ 32 ä½åå…­è¿›åˆ¶å­—ç¬¦ï¼ˆ16 å­—èŠ‚ï¼‰');
                return;
            }
            
            const ciphertext = window.smkit.sm4Encrypt(key, plaintext);
            
            document.getElementById('sm4-result').innerHTML = `
                <div class="result">
                    <h3>åŠ å¯†ç»“æœï¼š</h3>
                    <pre>${ciphertext}</pre>
                </div>
            `;
        }
        
        function testSM4Decrypt() {
            const key = document.getElementById('sm4-key').value;
            const resultDiv = document.getElementById('sm4-result');
            
            if (!resultDiv.textContent.includes('åŠ å¯†ç»“æœ')) {
                alert('è¯·å…ˆåŠ å¯†');
                return;
            }
            
            const ciphertext = resultDiv.querySelector('pre').textContent;
            const plaintext = window.smkit.sm4Decrypt(key, ciphertext);
            
            document.getElementById('sm4-result').innerHTML = `
                <div class="result">
                    <h3>è§£å¯†ç»“æœï¼š</h3>
                    <pre>${plaintext}</pre>
                </div>
            `;
        }
        
        function generateSM2KeyPair() {
            const keyPair = window.smkit.generateKeyPair();
            
            document.getElementById('sm2-private-key').value = keyPair.privateKey;
            document.getElementById('sm2-public-key').value = keyPair.publicKey;
            
            document.getElementById('sm2-result').innerHTML = `
                <div class="result">
                    <h3>å¯†é’¥å¯¹å·²ç”Ÿæˆï¼</h3>
                    <p>ç§é’¥é•¿åº¦: ${keyPair.privateKey.length} ä½</p>
                    <p>å…¬é’¥é•¿åº¦: ${keyPair.publicKey.length} ä½</p>
                </div>
            `;
        }
        
        let currentSignature = '';
        
        function testSM2Sign() {
            const privateKey = document.getElementById('sm2-private-key').value;
            const message = document.getElementById('sm2-message').value;
            
            if (!privateKey) {
                alert('è¯·å…ˆç”Ÿæˆå¯†é’¥å¯¹');
                return;
            }
            
            currentSignature = window.smkit.sign(privateKey, message);
            
            document.getElementById('sm2-result').innerHTML = `
                <div class="result">
                    <h3>ç­¾åç»“æœï¼š</h3>
                    <pre>${currentSignature}</pre>
                </div>
            `;
        }
        
        function testSM2Verify() {
            const publicKey = document.getElementById('sm2-public-key').value;
            const message = document.getElementById('sm2-message').value;
            
            if (!publicKey) {
                alert('è¯·å…ˆç”Ÿæˆå¯†é’¥å¯¹');
                return;
            }
            
            if (!currentSignature) {
                alert('è¯·å…ˆç­¾å');
                return;
            }
            
            const isValid = window.smkit.verify(publicKey, message, currentSignature);
            
            document.getElementById('sm2-result').innerHTML = `
                <div class="result">
                    <h3>éªŒè¯ç»“æœï¼š</h3>
                    <pre>ç­¾å${isValid ? 'âœ… æœ‰æ•ˆ' : 'âŒ æ— æ•ˆ'}</pre>
                </div>
            `;
        }
    </script>
</body>
</html>
